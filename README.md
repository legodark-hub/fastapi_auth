# FastAPI Авторизация

Это простое приложение на FastAPI, которое обеспечивает регистрацию пользователей и аутентификацию на основе JWT.

## Возможности

- Регистрация пользователя
- Вход пользователя и генерация JWT токена
- Защищенный эндпоинт для получения информации о текущем пользователе


## Стек

- Python 3.12+
- FastAPI
- Uvicorn
- SQLAlchemy
- asyncpg
- Passlib 
- python-jose
- Docker & Docker Compose

## Настройка и установка

1.  **Клонируйте репозиторий:**
    ```bash
    git clone <URL-репозитория>
    cd fastapi_auth
    ```

2.  **Создайте и активируйте виртуальное окружение:**
    ```bash
    python -m venv .venv
    source .venv/bin/activate  # В Windows используйте `.venv\Scripts\activate`
    ```

3.  **Установите зависимости:**
    ```bash
    pip install -r requirements.txt
    ```

## Переменные окружения

Приложение использует файл `.env` для конфигурации. Создайте файл `.env` в корне проекта, скопировав `.env.example`:

```bash
cp .env.example .env
```

- `DATABASE_URL`: URL для подключения к базе данных.
- `SECRET_KEY`: Секретный ключ для подписи JWT.
- `ALGORITHM`: Алгоритм для подписи JWT.
- `ACCESS_TOKEN_EXPIRE_MINUTES`: Время жизни токена доступа в минутах.


## Запуск приложения

Для запуска приложения с помощью Docker, используйте следующую команду:

```bash
docker-compose up -d
```

Приложение будет доступно по адресу `http://127.0.0.1:8000`.

## API Эндпоинты

Документация API доступна по адресу `http://127.0.0.1:8000/docs` когда приложение запущено.

- **Регистрация нового пользователя:**
  - **Эндпоинт:** `POST /api/register`
  - **Тело запроса:**
    ```json
    {
      "email": "user@example.com",
      "password": "string"
    }
    ```

- **Вход и получение токена доступа:**
  - **Эндпоинт:** `POST /api/token`
  - **Тело запроса (form-data):**
    - `username`: Email пользователя.
    - `password`: Пароль пользователя.

- **Получение информации о текущем пользователе:**
  - **Эндпоинт:** `GET /api/users/me`
  - **Аутентификация:** Требуется Bearer Token в заголовке `Authorization`.